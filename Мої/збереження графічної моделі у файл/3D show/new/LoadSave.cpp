//---------------------------------------------------------------------------
#pragma hdrstop
#include "LoadSave.h"
//---------------------------------------------------------------------------
void LoadSave::LoadToFile(char*fname)
{
    int i,k;
    FILE *f;
    f=fopen(fname,"rb");
    fread(&n_point,1,sizeof(int),f);
    free(point);
    point=(Point3D*)malloc(n_point*sizeof(Point3D));
    fread(point,n_point,sizeof(Point3D),f);
    CreateGraf();
    for(i=0,k=0;i<n_point;i++)
    {
        k+=i;
    }
    k=k/8+1;
    fread(grf,k,sizeof(graf),f);
    fclose(f);
}
//---------------------------------------------------------------------------
void LoadSave::SaveToFile(char*fname)
{
    int i,k;
    FILE *f;
    if(n_point<=0)
    {
        return;
    }
    f=fopen(fname,"wb");
    fwrite(&n_point,1,sizeof(int),f);
    fwrite(point,n_point,sizeof(Point3D),f);
    for(i=0,k=0;i<n_point;i++)
    {
        k+=i;
    }
    k=k/8+1;
    fwrite(grf,k,sizeof(graf),f);
    fclose(f);
}
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
#pragma package(smart_init)
 