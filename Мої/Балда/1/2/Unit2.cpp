//---------------------------------------------------------------------------
#pragma hdrstop
#include "Unit2.h"
#pragma package(smart_init)
//---------------------------------------------------------------------------
TSymbol::TSymbol()
{
    symbol=0;
    n=0;
    Symbol=NULL;
}
//---------------------------------------------------------------------------
TSymbol::~TSymbol()
{
    //delete[] Symbol;
}
//---------------------------------------------------------------------------
void TSymbol::AddWord(char *s)
{
    int i,j;
    if(s[0]==0)
    {
        return;
    }
    if(!Symbol)
    {
        n++;
        Symbol=new TSymbol;
        Symbol[0].symbol=s[0];
        Symbol[0].AddWord(s+1);
        return;
    }
    i=0;
    while(i<n && s[0]!=Symbol[i].symbol)
    {
        i++;
    }
    if(i>=n)                                           
    {
        TSymbol *buf=new TSymbol[n];
        for(i=0;i<n;i++)
        {
            buf[i].symbol=Symbol[i].symbol;
            buf[i].n=Symbol[i].n;
            buf[i].Symbol=Symbol[i].Symbol;
        }
        delete Symbol;
        n++;
        Symbol=new TSymbol[n];
        i=0;
        while(i<n-1 && s[0]>buf[i].symbol)
        {
            Symbol[i].symbol=buf[i].symbol;
            Symbol[i].n=buf[i].n;
            Symbol[i].Symbol=buf[i].Symbol;
            i++;
        }
        Symbol[i].symbol=s[0];
        Symbol[i].n++;
        j=i;
        i++;
        while(i<n)
        {
            Symbol[i].symbol=buf[i-1].symbol;
            Symbol[i].n=buf[i-1].n;
            Symbol[i].Symbol=buf[i-1].Symbol;
            i++;
        }
        delete[] buf;
        Symbol[j].AddWord(s+1);
    }
    else
    {
        Symbol[i].AddWord(s+1);
    }
}
//---------------------------------------------------------------------------
void TSymbol::PrintAllWord()
{
    int i;
    if(Symbol)
    {
        for(i=0;i<n;i++)
        {
            cout<<Symbol[i].symbol;
            Symbol[i].PrintAllWord();
        }
    }
    cout<<endl;
}
//---------------------------------------------------------------------------
void Delete(TSymbol &s)
{
    int i;
    if(s.Symbol)
    {
        for(i=0;i<s.n;i++)
        {
            Delete(s.Symbol[i]);
        }
        delete s.Symbol;
        s.Symbol=NULL;
        s.n=0;
        s.symbol=0;
    }
}
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
 