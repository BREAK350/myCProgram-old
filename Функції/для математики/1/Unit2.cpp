//---------------------------------------------------------------------------
#pragma hdrstop
#include "Unit2.h"
#pragma package(smart_init)
//---------------------------------------------------------------------------
int SearchTerms(char *s,int *&ind)
{
    int i,buf[256],n;
    char *p=s;
    i=0;
    while(*p)
    {
        if(*p=='(')
        {
            p=SearchClosedBrackets(p)-1;
        }
        else
        {
            if(isAdd_Sub(*p))
            {
                buf[i]=p-s;
                i++;
            }
        }
        p++;
    }
    ind=new int[n=i];
    for(i=0;i<n;i++)
    {
        ind[i]=buf[i];
    }
    return n;
}
//---------------------------------------------------------------------------
char* SearchClosedBrackets(char *s)
{
    char *p=s;
    int b=1;
    if(*p!='(')
    {
        return p;
    }
    p++;
    while(*p && b)
    {
        if(*p=='(')
        {
            b++;
        }
        if(*p==')')
        {
            b--;
        }
        p++;
    }
    return p;
}
//---------------------------------------------------------------------------
int isAdd_Sub(char c)
{
    return (c=='+' || c=='-');
}
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
